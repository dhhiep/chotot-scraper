$ ->
  $('#potentials-table').dataTable
    responsive: true
    processing: true
    autoWidth: false
    pageLength: 25
    oLanguage:
      sProcessing: '<%= image_tag("Spinner.gif") %>'
    serverSide: true
    searchDelay: 800
    ajax: $('#potentials-table').data('source')
    pagingType: 'full_numbers'
    # order: [[ 4, "desc" ]]
    columns: [
      {data: 'id'}
      {data: 'name'}
      {data: 'phone'}
      {data: 'owner'}
      {data: 'remind_at'}
      {data: 'last_comment'}
      {data: 'actions'}
    ]

  $('.input-group.date.only_date').datetimepicker
    format: 'DD/MM/YYYY'
    disabledHours: false
    allowInputToggle: true

  $('.delete_comment').on 'click', ->
    destroy_flag = $(@).parents('.comment-block').find('.destroy_flag')
    current_status = destroy_flag.val() == 'true'
    next_status = !current_status
    destroy_flag.val(next_status)
    txt = if next_status then "Submit to delete or Click again to revert cancel delete action" else 'Delete'
    $(@).text(txt)
